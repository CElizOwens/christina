{% extends 'admin/templates/admin_template.html' %}

{% block title %}Events{% endblock %}

{% block main %}
<div class="container">
  <div class="row">
    <div class="col-2">
      <h2>Events</h2>
    </div>

    <div class="col-6">
      <form action="/events" method="POST">
        <div>
          <label for="venues"><b>Location:</b></label>
          <select name="venues" id="venues">
            <option>Choose...</option>
            {% for program in programs %}
              <option>{{ program.event.name }}</option>
            {% endfor %}
          </select>
          ...or add new venue
        </div>
        <div class="form-group">
          <label><b>Date and Time:</b></label>
          <input class="form-control" type="text" name="day_time" placeholder="e.g. 08-03-2019 6:00pm">
        </div>

        <button type="submit" class="btn btn-success">Add Event</button>

      </form>
    </div>
  </div>
  <hr>
  {% for program in programs %}
    <div class="row">
      <div class="col-3">
        <b>{{ program.event.name }}</b>
      </div>
      <div class="col-4">
        {{ program.event.day_time.strftime("%B %d, %Y - %I:%M %p") }}
      </div>
      <div class="col-2">
        <!-- <a href="/edit_event/{{ program }}">Edit</a> -->
        <a href="{{ url_for('edit_event', event_id=program.event.id) }}">Edit</a>
      </div>
      <div class="col-3"></div>
    </div>
    <br>
    {% for performance in program.performances %}
      <div class="row">
        <div class="col-1"></div>
        <div class="col-3">
          {{ performance.name }}
        </div>

        <div class="col-4">
          {{ performance.title }}
        </div>

        <div class="col-4">
          {{ performance.notes }}
        </div>

      </div>
    {% endfor %}
    <hr>
  {% endfor %}
</div>
{% endblock %}
