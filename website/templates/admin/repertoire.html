{% extends 'admin/templates/admin_template.html' %}

{% block title %}Repertoire{% endblock %}

{% block main %}
<div class="container">
  <div class="row">
    <div class="col">
      <h2>Repertoire</h2>
      <hr>
    </div>
  </div>

  <form action="/repertoire" method="POST">
    <div class="row">

      <div class="col-3">
        <div class="form-group">
          <label>Composer</label>
          <input class="form-control" type="text" name="composer">
        </div>
      </div>

      <div class="col-3">
        <div class="form-group">
          <label>Title</label>
          <input class="form-control" type="text" name="title">
        </div>
      </div>

      <div class="col-3">
        <div class="form-group">
          <label>Opus</label>
          <input class="form-control" type="text" name="opus">
        </div>
      </div>

      <!-- <div class="col-2">
        <div class="form-group">
          <label>Date Played</label>
          <input class="form-control" type="text" name="date_played">
        </div>
      </div> -->

      <div class="col-3">
        <div class="form-group">
          <label for="ensemble_id">Ensemble</label>
          <select id="ensemble_id" class="form-control" name="ensemble_id">
            <option selected>Choose</option>
            {% for ensemble in ensembles %}
              <option value="{{ ensemble.id }}">{{ ensemble.ens_type }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
  <hr>

  {% for piece in pieces %}
  <div class="row">
    <div class="col-3">
      {{ piece.name }}
    </div>
    <div class="col-3">
      {{ piece.title }}
    </div>
    <div class="col-3">
      {{ piece.opus }}
    </div>
    <!-- <div class="col-2">
      {{ piece.date_played }}
    </div> -->
    <div class="col-3">
      {{ piece.ens_type }}
    </div>
  </div>
  {% endfor %}


<script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

function filterFunction() {
  var input, filter, ul, li, a, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  div = document.getElementById("myDropdown");
  a = div.getElementsByTagName("a");
  for (i = 0; i < a.length; i++) {
    txtValue = a[i].textContent || a[i].innerText;
    if (txtValue.toUpperCase().indexOf(filter) > -1) {
      a[i].style.display = "";
    } else {
      a[i].style.display = "none";
    }
  }
}
</script>
</div>
{% endblock %}
